use library_mgmt_db

create table users
(
emp_code varchar(15) PRIMARY KEY,
first_name varchar(255),
last_name varchar(255),
dob date,
email varchar(255) unique,
password varchar(32),
last_login datetime,
status integer
);

create table book
(
id integer PRIMARY KEY identity(1, 1),
book_no varchar(255),
title varchar(255),
publisher varchar(255),
author varchar(255),
description varchar(255),
qty integer,
price float,
date_added datetime,
thumbnail varchar(255),
published_date date,
status integer
);

create table book_category
(
id integer PRIMARY KEY identity(1, 1),
name varchar(255),
parent integer REFERENCES book_category (id) null,
status integer
);

create table book_category_map
(
id integer PRIMARY KEY identity(1, 1),
book_id integer REFERENCES book (id),
category_id integer REFERENCES book_category (id),
status integer
);

create table book_issue
(
issue_id integer PRIMARY KEY identity(1, 1),
book_id integer REFERENCES book (id),
emp_code varchar(15) REFERENCES users (emp_code),
requested_issue_date date,
expected_return_date date,
issue_date date,
return_date date
);